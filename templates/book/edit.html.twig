{% extends 'base.html.twig' %}

{% block title %}Messager - {{ book.name }}{% endblock %}

{% block body %}
    <div class="app-wrapper">
        <div class="container" style="max-width: 600px;">
            <div class="d-flex align-items-center mb-4">
                <a href="{{ path('book_index') }}" class="btn btn-outline-secondary btn-sm me-3">&larr; Retour</a>
                <h1 class="app-title mb-0">Liste de contacts</h1>
            </div>

            <form method="post" action="{{ path('book_update', {uuid: book.uuid}) }}">
                {# ── Book name ── #}
                <div class="form-section mb-4">
                    <h2 class="form-section-title">Nom</h2>
                    <input type="text" class="form-control" name="name" value="{{ book.name }}" required>
                </div>

                {# ── Contacts ── #}
                <div class="form-section mb-4">
                    <h2 class="form-section-title">Contacts ({{ book.contacts|length }})</h2>
                    <textarea class="form-control font-monospace" name="phones" rows="16"
                              placeholder="Un numéro par ligne, ex:&#10;+33 6 12 34 56 78&#10;06 98 76 54 32">
                        {%- for contact in book.contacts -%}
                            {{ contact.phoneNumber }}{{ not loop.last ? "\n" }}
                        {%- endfor -%}
                    </textarea>
                    <div class="form-text">Un numéro de téléphone par ligne. Les formats acceptés : +33 6 XX, 06 XX, 0033 6 XX.</div>
                </div>

                <button type="submit" class="btn btn-ms-primary w-100">Enregistrer</button>
            </form>
        </div>
    </div>
{% endblock %}
